!function(){"use strict";angular.module("platanus.upload",["ngFileUpload"])}();
!function(){function e(){function e(e){function a(a){e.uploadData=a.upload;var o=a.upload||a;if(e.uploadData.identifier=o.identifier,e.uploadData.documentName=o.file_name||o.fileName,e.uploadData.fileExtension=o.file_extension||o.fileExtension,e.uploadData.downloadUrl=o.download_url||o.downloadUrl,!(e.uploadData.identifier&&e.uploadData.documentName&&e.uploadData.fileExtension&&e.uploadData.downloadUrl))throw"Invalid response. Must be a json with identifier, file_name, file_extension and download_url"}e.setUploadData=a}var a={link:e,require:"ngModel",replace:!0,scope:{ngModel:"=",documentName:"=",uploadUrl:"@",hidePreview:"@",hideLink:"@",noDocumentText:"@",documentExtension:"@"},template:'<div><async-upload upload-url="{{uploadUrl}}" upload-callback="setUploadData($uploadData)" ng-model="ngModel"></async-upload><doc-preview no-document-text="{{noDocumentText}}" hide-link="{{hideLink}}" hide-preview="{{hidePreview}}" document-name="uploadData.documentName" document-extension="{{uploadData.fileExtension}}" document-url="uploadData.downloadUrl"></doc-preview><div>'};return a}angular.module("platanus.upload").directive("asyncUploadPreview",e)}();
!function(){function a(a,l){function e(e,n,u,o){function t(l){if(l&&l.length){var n={url:e.uploadUrl,file:l[0]};a.upload(n).success(function(a){o.$setViewValue(a.upload.identifier),d&&d(e.$parent,{$uploadData:a})})}}e.upload=t;var d=u.uploadCallback;d&&(d=l(d))}var n={template:'<div class="async-upload" ngf-change="upload($files)" ngf-select ng-model="files"><button>Upload</button></div>',require:"ngModel",scope:{uploadUrl:"@"},link:e};return n}angular.module("platanus.upload").directive("asyncUpload",a),a.$inject=["Upload","$parse"]}();
!function(){function n(){function n(n){function e(){var n=["gif","jpeg","jpg","png","bmp"];return n}function t(){var n=["3gp","7z","ace","ai","aif","aiff","amr","asf","asx","bat","bin","bup","cab","cbr","cda","cdl","cdr","chm","dat","divx","dll","dmg","doc","docx","dss","dvf","dwg","eml","eps","exe","fla","flv","gz","hqx","htm","html","ifo","indd","iso","jar","lnk","log","m4a","m4b","m4p","m4v","mcd","mdb","mid","mov","mp2","mp4","mpeg","mpg","msi","mswmm","ogg","pdf","pps","ppt","pptx","ps","psd","pst","ptb","pub","qbb","qbw","qxd","ram","rar","rm","rmvb","rtf","sea","ses","sit","sitx","ss","swf","tgz","thm","tif","tmp","torrent","ttf","txt","vcd","vob","wav","wma","wmv","wps","xls","xlsx","xpi","zip"];return e().concat(n)}function i(){return"image"===m()}function r(){return"none"===m()}function o(){if(n.documentExtension)return n.documentExtension;if(n.documentUrl){var e=n.documentUrl.split("/").pop();return e.split("?").shift().split(".").pop()}}function c(){var n=o();return-1===t().indexOf(n)?"unknown":n}function m(){if(!n.documentUrl)return"none";var t=o();return-1!==e().indexOf(t)?"image":"other"}function u(){return n.documentName||n.documentUrl}function a(){return"/assets/file-extensions/file_extension_"+c()+".png"}function s(){return r()?"":d()?n.documentUrl:a()}function d(){return i()&&!n.hidePreview}function l(){return r()||i()&&n.hideLink?"":n.documentUrl}function p(){return r()&&n.noDocumentText?n.noDocumentText:!1}n.linkLabel=u,n.imageSrc=s,n.imageAsPreview=d,n.linkUrl=l,n.getNoDocumentText=p}var e={template:'<div class="doc-preview"><p class="no-document-text" ng-if="getNoDocumentText()">{{ getNoDocumentText() }}</p><img class="image-preview" ng-class="{ icon: !imageAsPreview() }" ng-if="imageSrc()" ng-src="{{ imageSrc() }}"/><a class="doc-link" ng-if="linkUrl()" href="{{ linkUrl() }}" target="_blank">{{ linkLabel() }}</a></div>',restrict:"E",replace:!0,scope:{documentUrl:"=",documentName:"=",documentExtension:"@",noDocumentText:"@",hidePreview:"@",hideLink:"@"},link:n};return e}angular.module("platanus.upload").directive("docPreview",n)}();